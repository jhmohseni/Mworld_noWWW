<!-- i-C-a -->
<div id="blackhole" data-role="page">
  <div class="coachcontainer" style="position:absolute;top:0px;left:-225px;width:225px;height:320px;"></div>
  <script src="js/hammer.js"></script>
  <script src="js/jquery.hammer.js"></script>  
  <script src="js/slidebarbh.js"></script>
  <div class="menuhousing"></div>
  <div class="homebtnholder"><div class="homebtnbh"></div></div>
  <div class="mpbtnholder"><div class="mpbtnbh"></div></div>
  <div class="cpbtnholder"><div class="cpbtnbh"></div></div>
  <div class="infobtnholder"><div class="infobtnbh"></div></div>
  <div class="credsbtnholder"><div class="credsbtnbh"></div></div>
  <div class="menubtnholder"><div class="menubtnbh"></div></div>
  <div id="bonus-bh" class="talkbubble" style="width:473px;height:296px;position:absolute;left:300px;top:40px;visibility:hidden;"></div><!--/bonus-msm-->
  <div class="bptitleholder" style="padding-top:14px;"><h1>From Supergiant to Black Hole...</h1></div>
        <div id="spacechar">&nbsp;
            <div data-role="content" class="kidzcontent">
                <div class="v-spacer"></div>
                <div class="sidebarleft-half">
                    <a id="bhimg1link" style="visibility:hidden;" onclick="htmlLightbox('images/5-8/Space/Black_Holes/Where_BH_Come/blackholeimage.jpg', 'An illustration of a black hole... gas and dust look like a whirlpool as they are sucked into the black hole!')" href="#">click here</a>
                    <a id="bhimg2link" style="visibility:hidden;" onclick="htmlLightbox('images/5-8/Space/Black_Holes/Where_BH_Come/blackholeimage2.jpg', 'An illustration of a black hole feeding on gas and dust, and shooting out X-rays')" href="#">click here</a>
                    <div id="zoomwrapper">
                      <div id="pol1" class="pPiece" style="left:100px;top:270px;">
                          <img src="images/5-8/Space/Black_Holes/Where_BH_Come/blackholeimagepol.jpg" alt="" />
                      </div>
                      <div id="pol2"class="pPiece" style="left:75px;top:290px;">
                          <img src="images/5-8/Space/Black_Holes/Where_BH_Come/blackholeimage2pol.jpg" alt="" />
                      </div>
                      <div id="pol3" class="pPiece" style="left:100px;top:270px;">
                          <img src="images/5-8/Space/Black_Holes/Where_BH_Come/nscollidepol.jpg" alt="" />
                      </div>
                      <div id="pol4" class="pPiece" style="left:100px;top:270px;">
                          <img src="images/5-8/Space/Black_Holes/Where_BH_Come/seebhpol.jpg" alt=""/>
                      </div>
                    </div><!--/zoomwrapper-->
                </div>
                <div class="bpcontentbh">
                    <p>Sometimes a supergiant star becomes so dense as it collapses that it crushes its core completely. All that remains is a black hole 2026 a very small, ultra dense object from which nothing can escape.</p>
                    <p>A black hole can also be formed by the collision of two neutron stars.  Check out 'Neutron stars collide' to find out more...</p>
                </div>
                <div class="botlogoholder"><a href="home.html" class="homelinkbh"><img src="images/5-8/bottomhomebh.png"></a></div>

            </div><!--end of content-->
    </div>
    <section class="container" style="height:670px;margin-top:-600px;">
      <div class="spriteComing" style="z-index:10;"></div>
    </section>
   <div class="micbtnholder"><div class="micbtnbh" id="playstopblackhole"></div></div>
    <div class="bbh"><div class="rwbh" id="blackholeaudiobbtn"></div></div>
    <div class="plbh"><div class="plpsbh" id="blackholeaudioplbtn"></div></div>
    <div class="fbh"><div class="fwbh" id="blackholeaudiofbtn" ></div></div>
    <div id="actualaudio-blackhole" style="visibility:hidden;"></div>
  <script src="js/spritespin.js" type="text/javascript"></script>
  blackholePage.findscript language="javascript" type="text/javascript" src="js/scriptblackhole.js"></script>
    <script>
        var playing;
        var paused;
        sound = new Audio(); // 'sound' is now an audio object
        soundpop = new Audio(); // 'sound' is now an audio object
        (function() {
          playing = false;
          paused = true;
          var blackholePage = $("#blackhole");
          blackholePage.swipe( { swipeRight:goBack, allowPageScroll:"auto"} );
          //change images path
          changeImageSrc('blackhole');
          findElementsWithBgImage('blackhole');
          //changeAudioSrc();
          var pol1Var = blackholePage.find('div#pol1'),
              pol2Var = blackholePage.find('div#pol2'),
              pol3Var = blackholePage.find('div#pol3'),
              pol4Var = blackholePage.find('div#pol4');

          pol1Var.css("z-index", 3);
          pol2Var.css("z-index", 2);
          pol3Var.css("z-index", 1);
          pol1Var.find('img').css("-webkit-transform", "rotate(0deg)");
          pol2Var.find('img').css("-webkit-transform", "rotate(5deg)");
          pol3Var.find('img').css("-webkit-transform", "rotate(-3deg)");
          pol4Var.find('img').css("-webkit-transform", "rotate(-3deg)");

          if(sound.canPlayType('audio/mpeg')) {
              blackholePage.find('#actualaudio-blackhole').html('<audio controls preload id="blackholeaudio" onpause="pausedaudio()" onplay="pausebg()"><source src="'+FS.remotePath+'audio/FromToBlackhole.mp3" type="audio/mpeg"></audio>');
          } 
            
          blackholePage.on('pageshow', function(){  
            
            var bonusGameImage = 'url("'+appBasePath+'images/5-8/Space/Black_Holes/game/bonustalk.png")';
            blackholePage.find('#bonus-bh').css({'background-image': bonusGameImage, 'background-repeat': 'no-repeat'});
            blackholePage.find('#start-blackhole').on('click', function() {
                blackholePage.find('#actualaudio-blackhole').show();
                var oldHeight = $('#node-body-holder').height();
                var newHeight = oldHeight - blackholePage.find('#actualaudio-blackhole').height();
                $('#node-body-holder').height(newHeight);
            });
            blackholePage.find("#bonus-bh").on('tap', function() {
              whatamimp3.play();bgsoundbh.pause();
              $.mobile.changePage("game-bh2.html", {transition: "flip"});
            });

            pol1Var.on('tap', function() {   
              buttonClickEffects($(this));   
              $('#bhimg1link')[0].click();
              mworldViewMedia(app.kidid, 'bhimg1');
            });  
          	pol2Var.on('tap', function() {
              buttonClickEffects($(this));
              $('#bhimg2link')[0].click();
              mworldViewMedia(app.kidid, 'bhimg2');
            });
            pol3Var.on('tap', function() {
              buttonClickEffects($(this));
              $.mobile.changePage("sub-space-bh-nscollide.html", {transition:"slide"});
            });     
            pol4Var.on('tap', function() {
              buttonClickEffects($(this));
              $.mobile.changePage("sub-space-bh-seebh.html", {transition:"slide"});
            });   

            blackholePage.find("#playstopblackhole").on('tap', function() {
              if(!playing) {
                blackholeaudio.play();
                blackholePage.find('.micbtnbh').css('background-position-x', '-81px');
                mworldPlayAudio(app.kidid, 'blackholeaudio');
                playing = true;
                paused = false;
              } else {
                blackholeaudio.pause();blackholeaudio.currentTime = 0;
                blackholePage.find('.micbtnbh').css('background-position-x', '0px');
                playing = false;
                paused = true;
              }
            });
            
            blackholePage.find("#blackholeaudioplbtn").on('tap', function() {
              if(paused) {
                blackholeaudio.play();
                paused = false;
              } else {
                blackholeaudio.pause();
                paused = true;
              }
            });
            
            blackholePage.find("#blackholeaudiofbtn").on('tap', function() {
              var ctime = blackholeaudio.currentTime;
              blackholeaudio.currentTime = ctime + 10;
            });
            
            blackholePage.find("#blackholeaudiobbtn").on('tap', function() {
              var ctime = blackholeaudio.currentTime;
              blackholeaudio.currentTime = ctime - 10;
            });
            
            blackholePage.find("#blackholeaudiopsbtn").on('tap', function() {
              blackholeaudio.pause();
              blackholePage.find(".audiopanel").css({"backgroundPosition":"0px 0px"});
            });
            blackholePage.find('.botlogoholder').on('tap', function(){
              buttonClickEffects($(this));
              playClickSound();
            });
            blackholePage.find('.homelinkbh').on('tap', function() { mainaudiobg.play(); bgsoundbh.pause(); bgsoundbh.currentTime = 0;});

            setTimeout(function(){ mworldPageVisit(app.kidid, 'From-Supergiant-To-Black-Hole'); },app.BHTrackTime);
          });
          
        })();
        
        (function() {
            var url = "http://back.uvmate.com/jeuel_services/educ.json?nid=46";
            $.getJSON( url, function( data ) {
            
                var html = data[0].Images;
                var re = /<img[^>]+src="http:\/\/([^">]+)/g;
                var results = re.exec(html);
                var source = results[1];
                $('#nstar').attr('href', "JavaScript:html5Lightbox.showLightbox(0, 'http://"+source+"', 'Another illustration of a black hole feeding on gas and dust, and shooting out X-rays');")
            });
        })();
    
    
        (function() {
            var url = "http://back.uvmate.com/jeuel_services/educ.json?nid=47";
            $.getJSON( url, function( data ) {
                $('#node-pop').html(data[0].Body);
            
            });
        })();
        
      
        function goBack() {
            $.mobile.changePage("sub-space-bh-comefrom.html", {transition: "slide", reverse: true });
        }
        function pausedaudio() {
            bgsoundbh.play();
        }
    
        function pausebg() {
            bgsoundbh.pause();
        }
    </script>
    <script src="js/fourcardLogic.js"></script>
</div>
